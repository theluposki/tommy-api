{"version":3,"sources":["../../src/db/createTables.ts"],"sourcesContent":["import { readFile } from \"fs\";\n\nconst filePath = \"./create_tables.sql\";\n\nfunction readSQLFile(filePath: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    readFile(filePath, \"utf8\", (error, data) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(data);\n      }\n    });\n  });\n}\n\nasync function executeSQLCommands(\n  connection: any,\n  sqlCommands: string[]\n): Promise<void> {\n  try {\n    for (const sqlCommand of sqlCommands) {\n      await connection.query(sqlCommand);\n    }\n    console.log(\"[ DB ] Tabelas criadas com sucesso.\");\n  } catch (error: unknown) {\n    if (error instanceof Error) {\n      const errorMessage: string = error.message;\n      console.error(errorMessage);\n    } else {\n      console.error(\"Ocorreu um erro desconhecido\");\n    }\n  }\n}\n\nasync function createTables(connection: any): Promise<void> {\n  try {\n    const sqlScript = await readSQLFile(filePath);\n    const sqlCommands = sqlScript\n      .split(\";\")\n      .map((command) => command.trim())\n      .filter((command) => command);\n    await executeSQLCommands(connection, sqlCommands);\n  } catch (error: unknown) {\n    if (error instanceof Error) {\n      const errorMessage: string = error.message;\n      console.error(errorMessage);\n    } else {\n      console.error(\"Ocorreu um erro desconhecido\");\n    }\n  }\n}\n\nexport { createTables };\n"],"mappings":";AAAA,SAAS,gBAAgB;AAEzB,IAAM,WAAW;AAEjB,SAAS,YAAYA,WAAmC;AACtD,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,aAASA,WAAU,QAAQ,CAAC,OAAO,SAAS;AAC1C,UAAI,OAAO;AACT,eAAO,KAAK;AAAA,MACd,OAAO;AACL,gBAAQ,IAAI;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH;AAEA,eAAe,mBACb,YACA,aACe;AACf,MAAI;AACF,eAAW,cAAc,aAAa;AACpC,YAAM,WAAW,MAAM,UAAU;AAAA,IACnC;AACA,YAAQ,IAAI,qCAAqC;AAAA,EACnD,SAAS,OAAP;AACA,QAAI,iBAAiB,OAAO;AAC1B,YAAM,eAAuB,MAAM;AACnC,cAAQ,MAAM,YAAY;AAAA,IAC5B,OAAO;AACL,cAAQ,MAAM,8BAA8B;AAAA,IAC9C;AAAA,EACF;AACF;AAEA,eAAe,aAAa,YAAgC;AAC1D,MAAI;AACF,UAAM,YAAY,MAAM,YAAY,QAAQ;AAC5C,UAAM,cAAc,UACjB,MAAM,GAAG,EACT,IAAI,CAAC,YAAY,QAAQ,KAAK,CAAC,EAC/B,OAAO,CAAC,YAAY,OAAO;AAC9B,UAAM,mBAAmB,YAAY,WAAW;AAAA,EAClD,SAAS,OAAP;AACA,QAAI,iBAAiB,OAAO;AAC1B,YAAM,eAAuB,MAAM;AACnC,cAAQ,MAAM,YAAY;AAAA,IAC5B,OAAO;AACL,cAAQ,MAAM,8BAA8B;AAAA,IAC9C;AAAA,EACF;AACF;","names":["filePath"]}